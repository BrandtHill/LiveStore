<!doctype html>
<html lang="en">
  <body style="margin:0;padding:0;background:#f6f7f9;">
    <!-- Wrapper -->
    <table
      role="presentation"
      cellspacing="0"
      cellpadding="0"
      border="0"
      width="100%"
      style="background:#f6f7f9;"
    >
      <tr>
        <td align="center" style="padding:24px 12px;">
          <!-- Card -->
          <table
            role="presentation"
            cellspacing="0"
            cellpadding="0"
            border="0"
            width="600"
            style="max-width:600px;width:100%;background:#ffffff;border-radius:8px;overflow:hidden;border:1px solid #e5e7eb;"
          >
            <!-- Header -->
            <tr>
              <td style="background:#111827;color:#ffffff;padding:20px 24px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;">
                <h1 style="margin:0;font-size:20px;line-height:1.4;">Thanks for your order!</h1>
                <p style="margin:4px 0 0 0;font-size:14px;opacity:.9;">
                  Order #{@order.id} • placed on {Calendar.strftime(
                    @order.inserted_at,
                    "%b %d, %Y"
                  )}
                </p>
              </td>
            </tr>
            
<!-- Intro -->
            <tr>
              <td style="padding:20px 24px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#111827;">
                <p style="margin:0 0 12px 0;font-size:16px;">
                  We’re getting your items ready. We’ll email you when they ship.
                </p>
              </td>
            </tr>
            
<!-- Items table -->
            <tr>
              <td style="padding:0 24px 8px 24px;">
                <table
                  role="presentation"
                  cellspacing="0"
                  cellpadding="0"
                  border="0"
                  width="100%"
                  style="border-collapse:collapse;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;"
                >
                  <thead>
                    <tr>
                      <th
                        align="left"
                        style="padding:8px 0;font-size:12px;color:#6b7280;font-weight:600;border-bottom:1px solid #e5e7eb;"
                      >
                        Item
                      </th>
                      <th
                        align="center"
                        style="padding:8px 0;font-size:12px;color:#6b7280;font-weight:600;border-bottom:1px solid #e5e7eb;"
                      >
                        Qty
                      </th>
                      <th
                        align="right"
                        style="padding:8px 0;font-size:12px;color:#6b7280;font-weight:600;border-bottom:1px solid #e5e7eb;"
                      >
                        Subtotal
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr :for={item <- @order.items}>
                      <td style="padding:10px 0;font-size:14px;color:#111827;">
                        <div style="font-weight:600;">{item.variant.product.name}</div>
                        <div style="font-size:12px;color:#6b7280;">SKU: {item.variant.sku}</div>
                        <div
                          :for={attr <- item.variant.attributes}
                          style="font-size:11px;color:#6b7280;padding-left: 4px"
                        >
                          {attr.type}: {attr.value}
                        </div>
                      </td>
                      <td align="center" style="padding:10px 0;font-size:14px;color:#111827;">
                        {item.quantity}
                      </td>
                      <td align="right" style="padding:10px 0;font-size:14px;color:#111827;">
                        {money(item.price * item.quantity)}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
            
<!-- Order Summary -->
            <tr>
              <td style="padding:12px 24px;">
                <table
                  role="presentation"
                  width="100%"
                  cellspacing="0"
                  cellpadding="0"
                  border="0"
                  style="border-collapse:collapse;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;"
                  style="font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;"
                >
                  <tr>
                    <td
                      colspan="2"
                      style="padding:8px 12px;font-weight:600;font-size:14px;color:#111827;"
                    >
                      Order Summary
                    </td>
                  </tr>

                  <tr>
                    <td style="padding:4px 12px;font-size:14px;color:#6b7280;">Subtotal</td>
                    <td
                      align="right"
                      style="padding:4px 12px;font-size:14px;color:#111827;"
                    >
                      {money(@order.total - @order.amount_shipping - @order.amount_tax)}
                    </td>
                  </tr>

                  <tr>
                    <td style="padding:4px 12px;font-size:14px;color:#6b7280;">Shipping</td>
                    <td
                      align="right"
                      style="padding:4px 12px;font-size:14px;color:#111827;"
                    >
                      {money(@order.amount_shipping)}
                    </td>
                  </tr>

                  <tr>
                    <td style="padding:4px 12px;font-size:14px;color:#6b7280;">Tax</td>
                    <td
                      align="right"
                      style="padding:4px 12px;font-size:14px;color:#111827;"
                    >
                      {money(@order.amount_tax)}
                    </td>
                  </tr>

                  <tr>
                    <td
                      colspan="2"
                      style="border-top:1px solid #e5e7eb;padding:8px 12px;font-weight:600;font-size:16px;color:#111827;"
                    >
                      Order Total
                      <span style="float:right;font-size:16px;font-weight:bold;color:#111827;">
                        {money(@order.total)}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            
<!-- Shipping details -->
            <tr>
              <td style="padding:8px 24px 20px 24px;">
                <table
                  role="presentation"
                  width="100%"
                  cellspacing="0"
                  cellpadding="0"
                  border="0"
                  style="font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;"
                >
                  <tr>
                    <td style="padding:12px 14px;">
                      <div style="font-weight:600;color:#111827;font-size:14px;margin-bottom:4px;">
                        Shipping to
                      </div>
                      <div style="color:#111827;font-size:14px;line-height:1.4;">
                        {@order.shipping_details.name}<br />
                        {@order.shipping_details.street}<br :if={
                          @order.shipping_details.street_additional
                        } />
                        {@order.shipping_details.street_additional}<br />
                        {@order.shipping_details.city}, {@order.shipping_details.state} {@order.shipping_details.postal_code}<br />
                        {@order.shipping_details.country}
                      </div>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            
<!-- CTA -->
            <tr>
              <td align="center" style="padding:6px 24px 24px 24px;">
                <a
                  href={~p"/account/orders"}
                  style="display:inline-block;background:#111827;color:#ffffff;text-decoration:none;border-radius:6px;padding:10px 16px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:14px;"
                >
                  View your order
                </a>
              </td>
            </tr>
            
<!-- Footer -->
            <tr>
              <td style="padding:0 24px 20px 24px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#6b7280;font-size:12px;">
                If you have questions, reply to this email.
              </td>
            </tr>
          </table>
          <!-- /Card -->
        </td>
      </tr>
    </table>
  </body>
</html>
